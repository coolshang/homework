<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <style>
        .content{ width: 980px; margin: 0 auto;}
        * { margin: 0; padding: 0;}
        table { border-collapse:collapse; border-spacing:0;}
        th,td { padding: 0; text-align: center; border: 1px solid rgba(238, 0, 255, 0.54);}
        th { background: rgba(238, 0, 255, 0.54); color: #fff; height: 30px; line-height: 30px; width: 245px;border: 0;}
        img{ width: 200px;}
        button { width: 26px; height: 26px; text-align: center; line-height: 14px; font-size: 20px; cursor: pointer;}
        .all{ height: 30px; line-height: 30px;  background: rgba(238, 0, 255, 0.54); overflow:hidden;}
        .all span{ display: inline-block; width: 245px; float: right; text-align: center;}
    </style>
</head>
<body>
    <div class="content">
        <table>
            <tr>
                <th>商品</th>
                <th>单价</th>
                <th>数量</th>
                <th>小计</th>
            </tr>
            <tr class="shop">
                <td>
                    <img src="images/shop1.jpg">
                </td>
                <td class="price">1800</td>
                <td>
                    <button class="minus">-</button>
                    <span class="num">0</span>
                    <button class="add">+</button>
                </td>
                <td>
                    <div class="univalent">0</div>
                </td>
            </tr>
            <tr class="shop">
                <td>
                    <img src="images/shop2.jpg">
                </td>
                <td class="price">1400</td>
                <td>
                    <button class="minus">-</button>
                    <span class="num">0</span>
                    <button class="add">+</button>
                </td>
                <td>
                    <div class="univalent">0</div>
                </td>
            </tr>
            <tr class="shop">
                <td>
                    <img src="images/shop3.jpg">
                </td>
                <td class="price">8400</td>
                <td>
                    <button class="minus">-</button>
                    <span class="num">0</span>
                    <button class="add">+</button>
                </td>
                <td>
                    <div class="univalent">0</div>
                </td>
            </tr>
            <tr class="shop">
                <td>
                    <img src="images/shop4.jpg">
                </td>
                <td class="price">2000</td>
                <td>
                    <button class="minus">-</button>
                    <span class="num">0</span>
                    <button class="add">+</button>
                </td>
                <td>
                    <div class="univalent">0</div>
                </td>
            </tr>
        </table>
        <div class="all">
            <span>总价： <strong id="allPrice">0</strong> 元</span>
            <span>商品数量： <strong id="allShopNum">0</strong></span>
        </div>
    </div>
<script>
    var shop = document.querySelectorAll('.shop');
    var price = document.querySelectorAll('.price');
    var minus = document.querySelectorAll('.minus');
    var num = document.querySelectorAll('.num');
    var add = document.querySelectorAll('.add');
    var univalent = document.querySelectorAll('.univalent');
    var allShopNum = document.querySelector('#allShopNum');
    var allPrice = document.querySelector('#allPrice');
    var allNum = 0; //获得商品总数
    var allP = 0;   //获得商品的总价
    for(var i=0; i < shop.length; i++) {
        /**
         * 获得商品的总数量和总价格
         */
        var allThisNum = parseInt(num[i].innerHTML);
        var amount = parseInt(price[i].innerHTML);
        allNum += allThisNum;
        univalent[i].innerHTML = amount * allThisNum;
        allP += parseInt(univalent[i].innerHTML)
        //定义no属性
        minus[i].no= i;
        add[i].no= i;
        /**
         * 减少数量
         */
        minus[i].onclick = function () {
            var obj = num[this.no];
            var  number = parseInt(num[this.no].innerHTML);
            var all = allShopNum.innerHTML;
            var thisPrice = parseInt(price[this.no].innerHTML);
            if( number == 0){
                alert('不能再减啦！')
            } else {
                number--;
                all--;
                allShopNum.innerHTML = all;
                num[this.no].innerHTML = number;
                univalent[this.no].innerHTML = thisPrice * number;
                allP -= thisPrice;
                allPrice.innerHTML = allP;
            }

        };
        /**
         * 增加数量
         */
        add[i].onclick = function () {
            var obj = num[this.no];
            var  number = parseInt(num[this.no].innerHTML);
            var all = allShopNum.innerHTML;
            var thisPrice = parseInt(price[this.no].innerHTML);
            number++;
            allNum = number;
            num[this.no].innerHTML = number;
            all++;
            allShopNum.innerHTML = all;
            univalent[this.no].innerHTML = thisPrice * number;
            allP += thisPrice;
            allPrice.innerHTML = allP;
        }
    }

    allShopNum.innerHTML = allNum;
    allPrice.innerHTML = allP;
</script>
</body>
</html>